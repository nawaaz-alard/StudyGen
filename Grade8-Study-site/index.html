<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Grade 8 Success Portal - Your central hub for Cambridge Lower Secondary study resources, quizzes, and exam prep.">
    <meta name="keywords" content="Grade 8, Study, Cambridge, Checkpoint, Maths, Science, English, Quiz, Exam Prep">
    <meta name="author" content="Grade 8 Student">
    <title>Grade 8 Study Hub</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#9d6efd">
    <link rel="apple-touch-icon" href="icon-192.png">
</head>

<body>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => console.log('Service Worker registered!', reg.scope))
                    .catch(err => console.log('Service Worker registration failed: ', err));
            });
        }
    </script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <!-- Login Gateway Overlay -->


    <!-- 2FA / Security PIN Overlay -->
    <div id="auth-step-2" style="display: none;">
        <div id="profile-setup-box" class="glass-panel-md text-center">
            <h2><i class="fa-solid fa-user-lock"></i> Student Login</h2>
            <p>Sign in to sync your tasks and exams.</p>
            <div class="setup-form">
                <div class="input-group">
                    <label for="auth-email">Email Address</label>
                    <input type="email" id="auth-email" placeholder="student@example.com">
                </div>
                <div class="input-group">
                    <label for="auth-password">Password</label>
                    <input type="password" id="auth-password" placeholder="••••••••">
                </div>
                <!-- Optional: Username for new signups -->
                <div class="input-group" id="username-group">
                    <label for="auth-username">Username (for Signup)</label>
                    <input type="text" id="auth-username" placeholder="Student Name">
                </div>

                <div style="display: flex; gap: 10px; margin-top: 15px;">
                    <button id="btn-login" class="btn-secondary" style="flex: 1;">Login</button>
                    <button id="btn-signup" class="btn-primary" style="flex: 1;">Sign Up</button>
                </div>
            </div>
            <p id="setup-error" style="color: #ff4757; display: none; margin-top: 10px;">Error message here</p>
        </div>
    </div>

    <!-- Background Video -->
    <div class="video-background">
        <div class="overlay"></div>
        <video autoplay muted loop playsinline poster="background-poster.png" id="bg-video">
            <source src="study-background.mp4" type="video/mp4">
            <!-- Fallback if video is missing -->
            Your browser does not support HTML5 video.
        </video>
    </div>

    <!-- Main Content -->
    <main class="glass-container">
        <header class="main-header">
            <div class="header-top-row">
                <div id="datetime-display"></div>
                <!-- Right Side Controls -->
                <div class="header-controls">
                    <!-- Theme Switcher -->
                    <div class="theme-switcher">
                        <button class="theme-btn" data-color="#6a11cb" style="background: #6a11cb;"></button>
                        <button class="theme-btn" data-color="#00b894" style="background: #00b894;"></button>
                        <button class="theme-btn" data-color="#e17055" style="background: #e17055;"></button>
                        <button class="theme-btn" data-color="#0984e3" style="background: #0984e3;"></button>
                    </div>

                    <!-- Google Login (Top Right) -->
                    <div id="google-login-container">
                        <div id="g_id_onload"
                            data-client_id="895631263906-0m54r2mfu8aatr5jq9qlnmrl0c78m72g.apps.googleusercontent.com"
                            data-context="signin" data-ux_mode="popup" data-callback="handleCredentialResponse"
                            data-auto_prompt="false">
                        </div>
                        <div class="g_id_signin" data-type="standard" data-shape="pill" data-theme="filled_blue"
                            data-text="signin_with" data-size="medium" data-logo_alignment="left">
                        </div>
                        <div id="guest-login" style="margin-top: 5px; text-align: right;">
                            <button id="enter-guest" class="guest-btn">
                                <i class="fa-solid fa-user-ghost"></i> Enter as Guest
                            </button>
                        </div>
                        <div id="user-profile" style="display: none;">
                            <button id="upgrade-btn"><i class="fa-solid fa-crown"></i> Upgrade</button>
                            <span id="username-text"></span>
                            <img id="user-avatar" src="" alt="User">
                            <button id="sign-out-btn">Sign Out</button>
                        </div>
                    </div>
                </div>
            </div>
            </div>

            <h1>Grade 8 <span class="highlight">Success</span> Portal</h1>
            <p>Your central hub for all study resources and quizzes.</p>

            <!-- Motivation Widget -->
            <div id="motivation-box" class="glass-panel-sm" style="margin-bottom: 25px;">
                <i class="fa-solid fa-quote-left"></i> <span id="quote-text">Loading inspiration...</span>
            </div>

            <div class="tools-row">
                <!-- Focus Timer -->
                <div id="timer-box" class="glass-panel-md">
                    <h3><i class="fa-solid fa-clock"></i> Focus Timer</h3>
                    <div id="timer-display">30:00</div>
                    <div class="timer-controls">
                        <button id="start-timer" class="btn-primary">Start Focus</button>
                        <button id="reset-timer" class="btn-secondary">Reset</button>
                    </div>
                    <p class="timer-status">Ready to focus?</p>

                </div>

                <!-- To-Do List -->
                <div id="todo-box" class="glass-panel-md" style="vertical-align: top;">
                    <h3><i class="fa-solid fa-list-check"></i> Homework & Tasks</h3>
                    <div class="todo-input-group">
                        <input type="text" id="todo-input" placeholder="Add a new task...">
                        <button id="add-todo"><i class="fa-solid fa-plus"></i></button>
                    </div>
                    <ul id="todo-list">
                        <!-- Tasks will appear here -->
                    </ul>
                </div>
            </div>

        </header>

        <nav class="term-nav">
            <a href="#term1" class="nav-pill active">Term 1</a>
            <a href="#term2" class="nav-pill">Term 2</a>
            <a href="#term3" class="nav-pill">Term 3</a>
            <a href="#term4" class="nav-pill">Term 4</a>
        </nav>

        <div class="terms-container" id="terms-container">
            <!-- Content generated by main.js -->
        </div>

        <!-- Toast Container -->
        <div id="toast-container"></div>

        <!-- AI Assistant Widget -->
        <div class="ai-fab" id="ai-fab" title="Chat with AI Assistant">
            <i class="fa-solid fa-robot"></i>
        </div>

        <div class="ai-chat-window" id="ai-chat-window">
            <div class="chat-header">
                <span><i class="fa-solid fa-wand-magic-sparkles"></i> Study Buddy AI</span>
                <button id="close-chat" style="background:none;border:none;color:white;cursor:pointer;"><i
                        class="fa-solid fa-times"></i></button>
            </div>
            <div class="chat-messages" id="chat-messages">
                <div class="chat-message bot">
                    Hello! I'm your AI Study Assistant. How can I help you with your revision today?
                </div>
            </div>
            <div class="chat-input-area">
                <input type="text" class="chat-input" id="chat-input" placeholder="Ask a question...">
                <button class="chat-send" id="chat-send"><i class="fa-solid fa-paper-plane"></i></button>
            </div>
        </div>

        <script src="config.js"></script>
        <script src="main.js"></script>
    </main>

</body>

</html>